const search_url="http://api.jikan.moe/v3/search/anime?q=";var lazyLoadInstance=new LazyLoad({});function showResults(e,t){document.getElementById(e);let a=0;for(i in t){let n=t[i],s=n.type.toLowerCase();if(0!=s.localeCompare("special")&&0!=s.localeCompare("music")&&0!=s.localeCompare("ova")){try{if(0==n.rated.localeCompare("Rx"))continue}catch(e){}addToScreen(e,n),a++}}$.LoadingOverlay("hide"),document.getElementById("query").innerText=0==a?"No results found for '"+$("#search_input").val()+"' (Enter more than 3 letters)":"Search results found for '"+$("#search_input").val()+"'"}function addToScreen(e,t){let a=document.getElementById(e),n=document.createElement("div");n.classList.add("col"),n.classList.add("d-flex"),n.classList.add("justify-content-center"),n.classList.add("align-items-stretch"),n.classList.add("mb-4");let s=document.createAttribute("href");s.value="details.html?anime_id="+t.mal_id;let i=document.createElement("a");i.classList.add("card"),i.classList.add("shadow"),i.setAttributeNode(s),n.appendChild(i);let o=document.createAttribute("src");o.value=t.image_url;let r=document.createElement("img");r.classList.add("card-img-top"),r.classList.add("lazy"),r.setAttributeNode(o),i.appendChild(r);let c=document.createElement("div");c.classList.add("card-body"),c.classList.add("hover-this"),i.appendChild(c);let l=document.createElement("p");l.classList.add("card-title"),l.classList.add("font-size-12"),l.innerText=t.title,c.appendChild(l),a.appendChild(n)}function getSearchResults(e){if($.LoadingOverlay("show"),$("#intro_container").removeClass("display-block"),$("#intro_container").addClass("display-none"),$("#search_results_container").removeClass("display-none"),$("#search_results_container").addClass("display-block"),0==cacheCheck(e))$.get("https://api.allorigins.win/raw?url="+encodeURIComponent(e),function(t,a){sessionStorage.setItem(e,JSON.stringify(t)),showResults("result_screen",t.results)});else{showResults("result_screen",JSON.parse(sessionStorage.getItem(e)).results)}}function getTopAiring(e){if($.LoadingOverlay("show"),sessionStorage.page="2",$("#intro_screen").empty(),$("#topairing_season_button").attr("disabled",!0),$("#current_season_button").removeAttr("disabled"),$("#upcoming_anime_button").removeAttr("disabled"),0==storageCheck(e))$.get("https://api.allorigins.win/raw?url="+encodeURIComponent(e),function(t,a){setWithExpiry(e,JSON.stringify(t),2),showResults("intro_screen",t.top)});else{showResults("intro_screen",JSON.parse(getWithExpiry(e)).top)}}function getUpcomingAnime(e){if($.LoadingOverlay("show"),sessionStorage.page="3",$("#intro_screen").empty(),$("#upcoming_anime_button").attr("disabled",!0),$("#topairing_season_button").removeAttr("disabled"),$("#current_season_button").removeAttr("disabled"),0==storageCheck(e))$.get("https://api.allorigins.win/raw?url="+encodeURIComponent(e),function(t,a){setWithExpiry(e,JSON.stringify(t),2),showResults("intro_screen",t.top)});else{showResults("intro_screen",JSON.parse(getWithExpiry(e)).top)}}function getCurrentSeason(e){if($.LoadingOverlay("show"),sessionStorage.page="1",$("#intro_screen").empty(),$("#current_season_button").attr("disabled",!0),$("#topairing_season_button").removeAttr("disabled"),$("#upcoming_anime_button").removeAttr("disabled"),0==storageCheck(e))$.get("https://api.allorigins.win/raw?url="+encodeURIComponent(e),function(t,a){setWithExpiry(e,JSON.stringify(t),2),showResults("intro_screen",t.anime)});else{showResults("intro_screen",JSON.parse(getWithExpiry(e)).anime)}}function pageLoaded(){let e=new URLSearchParams(window.location.search);if(e.has("home"))switch($("#search_results_container").removeClass("display-block"),$("#search_results_container").addClass("display-none"),$("#intro_container").removeClass("display-none"),$("#intro_container").addClass("display-block"),Number(sessionStorage.getItem("page"))){case 1:getCurrentSeason("https://api.jikan.moe/v3/season");break;case 3:getUpcomingAnime("https://api.jikan.moe/v3/top/anime/1/upcoming");break;default:getTopAiring("https://api.jikan.moe/v3/top/anime/1/airing")}else if(e.has("search"))$("#intro_container").removeClass("display-block"),$("#intro_container").addClass("display-none"),$("#search_results_container").removeClass("display-none"),$("#search_results_container").addClass("display-block"),document.getElementById("search_input").value=e.get("search"),getSearchResults(search_url+e.get("search"));else switch(Number(sessionStorage.getItem("page"))){case 1:getCurrentSeason("https://api.jikan.moe/v3/season");break;case 3:getUpcomingAnime("https://api.jikan.moe/v3/top/anime/1/upcoming");break;default:getTopAiring("https://api.jikan.moe/v3/top/anime/1/airing")}}$(document).ready(function(){$("#footer").addClass("display-none"),$("#container").imagesLoaded().always(function(e){}).done(function(e){}).fail(function(){}).progress(function(e,t){}),$("#current_season_button").click(function(){getCurrentSeason("https://api.jikan.moe/v3/season"),lazyLoadInstance.update()}),$("#topairing_season_button").click(function(){getTopAiring("https://api.jikan.moe/v3/top/anime/1/airing"),lazyLoadInstance.update()}),$("#upcoming_anime_button").click(function(){getUpcomingAnime("https://api.jikan.moe/v3/top/anime/1/upcoming"),lazyLoadInstance.update()})}),window.addEventListener("load",pageLoaded);